# NX Bypasses

---

## Making the Stack Section Executable

If these are true:

- You can overwrite the instruction pointer
- You can bypass ASLR to read the address range of the process's stack section (or at least the address range of the part of the stack where the payload is)
- You can bypass ASLR to call a `libc` function

Then you can effectively undo the NX bit by setting the payload's address range as executable using the [mprotect](https://man7.org/linux/man-pages/man2/mprotect.2.html) system call.

```c
mprotect(void *start_address, size_t len, int prot);
```

- `start_address`: The starting address of the range you are changing the permissions on
- `len`: The number of bytes from the starting address you are changing the permissions on
- `prot`: A bit mask of the permission you're setting the range to
	- 7 is read, write, and execute

See [HTB Retired](https://github.com/tgihf/private-writeups/blob/main/htb/boxes/retired/retired.md) for an example.
